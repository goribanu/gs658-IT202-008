<!--
Challenge 3: Carousel Layout with Swiping
-----------------------------------------
Requirements:
    Using CSS adjust the layout per the following rules
    1. Header should be at the top
    2. Carousel should take up full width
    3. Buttons should be centered
    Using JavaScript solve the following
    1. Attach appropriate event listeners to each button
    2. Cycle through each panel showing only 1 at a time
    3. Ensure that the panels loop when reaching the last or first one
    4. Extra credit: Allow mouse swipe on the carousel to cycle through the panels similar to how the buttons would work 
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carousel UI</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Edit your UCID here -->
    <header>Header Section (gs658)</header>
    <!-- Don't make any other edits to the HTML -->
    <nav>
        <button>Previous</button>
        <button>Next</button>
    </nav>

    <div class="carousel">
        <div class="carousel-container">
            <div class="panel">Panel 1: HTML Forms</div>
            <div class="panel">Panel 2: CSS Grid</div>
            <div class="panel">Panel 3: JavaScript Events</div>
            <div class="panel">Panel 4: Responsive Design</div>
            <div class="panel">Panel 5: Accessibility Best Practices</div>
        </div>
    </div>
</body>

</html>
<script>
    /** Ignore this content**/
    let header = document.querySelector("header");
    header.innerText += " " + new Date().toLocaleString("en-US");
</script>

<script>
    /* gs658 2-24-25: In order to solve the challenge, I will add event listeners
    to the buttons to cycle through the panels and make sure the carousel loops
    back to the first/last panel whenever necessary.*/
// Get the buttons and carousel elements
const prevButton = document.querySelector("nav button:first-of-type");
const nextButton = document.querySelector("nav button:last-of-type");
const carouselContainer = document.querySelector(".carousel-container");
const panels = document.querySelectorAll(".panel");

let currentIndex = 0;

function updateCarousel() {
    carouselContainer.style.transform = `translateX(-${currentIndex * 100}%)`;
}
prevButton.addEventListener("click", () => {
    currentIndex = (currentIndex === 0) ? panels.length - 1 : currentIndex - 1;
    updateCarousel();
});
nextButton.addEventListener("click", () => {
    currentIndex = (currentIndex === panels.length - 1) ? 0 : currentIndex + 1;
    updateCarousel();
});
/* I can add event listeners for touch events to detect mouse swipes and based
on the swipe direction, I can cycle the carousel panels*/
let startX;
carouselContainer.addEventListener("mousedown", (e) => {
    startX = e.pageX;
});
carouselContainer.addEventListener("mouseup", (e) => {
    const endX = e.pageX;
    if (startX - endX > 50) {
        nextButton.click(); // Swipe right to left
    } else if (endX - startX > 50) {
        prevButton.click(); // Swipe left to right
    }
});
</script>

<style>
    /* I need to make the carousel layout to take up the full width, setting 
    .carousel and .carousel-container's widths to 100%. I'll use display: flex 
    and justify-content: center on the nav to center the buttons. */
.carousel {
    width: 100%;
    overflow: hidden;
}

.carousel-container {
    display: flex;
    transition: transform 0.3s ease;
}

.panel {
    min-width: 100%;
    box-sizing: border-box;
    text-align: center;
}

/* Button styling */
nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
}
</style>